# Dart 引用数据类型

## 列表 ( List )

::: code-group

```dart [字面量写法]
void main() {
  List 列表 = [];                       // [!code focus:8]
  List 列表 = [元素1, 元素2, 元素3];

  List<元素类型> 列表 = [];
  List<元素类型> 列表 = [元素1, 元素2, 元素3];

  var 集合 = <元素类型>[];
  var 集合 = <元素类型>[元素1, 元素2, 元素3];
}
```

```dart [列表方法写法]
void main() {
  List<元素类型> 列表 = List.empty(growable: true);             // [!code focus:8]

  List<元素类型> 列表 = List.generate(元素个数, (索引) => 元素);
}
```

:::

---

### 常用操作

```dart
void main() {
  List 列表 = [元素1, 元素2, 元素3];        // [!code focus:10]

  // 获取长度
  console.log(列表.length);

  // 获取元素
  console.log(列表[索引]);

  // 修改元素
  列表[索引] = 新值;
}
```

---

### 常用内置方法

|            |                 | 说明                                                                                   |
| :--------: | :-------------: | -------------------------------------------------------------------------------------- |
| 会改变自身 |     `add()`     | 向列表末尾添加一个元素                                                                 |
|            |   `addAll()`    | 向列表末尾添加另一个列表中的所有元素                                                   |
|            |   `remove()`    | 移除列表中第一个匹配的元素                                                             |
|            |  `removeAt()`   | 移除列表中指定索引位置的元素                                                           |
|            | `removeWhere()` | 移除列表中所有满足条件的元素                                                           |
|            |   `insert()`    | 在指定索引位置插入一个元素                                                             |
|            |  `insertAll()`  | 在指定索引位置插入另一个列表中的所有元素                                               |
| 不改变自身 |    `isEmpty`    | 判断是否为空，返回一个布尔值                                                           |
|            |  `isNotEmpty`   | 判断是否不为空，返回一个布尔值                                                         |
|            |   `indexOf()`   | 返回指定元素第一次出现位置的索引，未找到则返回`-1`                                     |
|            | `lastIndexOf()` | 返回指定元素最后一次出现位置的索引，未找到则返回`-1`                                   |
|            |  `contains()`   | 判断集合中是否含有指定的元素，返回一个布尔值                                           |
|            |    `join()`     | 将元素连接成字符串，可以指定分隔符                                                     |
| 可实现遍历 |   `forEach()`   | 每个元素执行一次指定的函数                                                             |
|            |    `where()`    | 对元素过滤，返回一个元素的可迭代对象 ( Iterable )<br/>需通过`toList()`将其转为列表     |
|            |     `map()`     | 对元素进行映射，返回一个元素的可迭代对象 ( Iterable )<br/>需通过`toList()`将其转为列表 |
|            |     `any()`     | 判断列表中是否有至少一个元素满足条件，返回布尔值                                       |
|            |    `every()`    | 判断列表中所有元素是否都满足条件，返回布尔值                                           |

## 集合 ( Set )

```dart
void main() {
  Set 集合 = {};                            // [!code focus:8]
  Set 集合 = {元素1, 元素2, 元素3};

  Set<元素类型> 集合 = {};
  Set<元素类型> 集合 = {元素1, 元素2, 元素3};

  var 集合 = <元素类型>{};
  var 集合 = <元素类型>{元素1, 元素2, 元素3};
}
```

---

### 常用操作

```dart
void main() {
  Set 集合 = {元素1, 元素2, 元素3};         // [!code focus:4]

  // 获取长度
  console.log(集合.length);
}
```

---

### 常用内置方法

|            |              | 说明                                         |
| :--------: | :----------: | -------------------------------------------- |
| 会改变自身 |   `add()`    | 向集合末尾添加一个元素                       |
|            |  `addAll()`  | 向集合末尾添加另一个集合中的所有元素         |
| 不改变自身 |  `isEmpty`   | 判断是否为空，返回一个布尔值                 |
|            | `isNotEmpty` | 判断是否不为空，返回一个布尔值               |
|            | `contains()` | 判断集合中是否含有指定的元素，返回一个布尔值 |
|            |  `toList()`  | 强制转换为列表类型，返回一个列表             |

::: details 例子：利用集合实现列表元素的去重

```dart
void main() {
  List<String> l = ["a", "b", "b"];     // [!code focus:7]

  Set<String> s = {};
  s.addAll(l);

  List<String> uniqueL = s.toList();
  print(uniqueL);       // ["a", "b"]
}
```

:::

## 映射 ( Map )

此处主要是指键值对的对象

结构复杂的对象则需要通过类 ( Class ) 的实例化实现

```dart
void main() {
  Map 映射 = {};                            // [!code focus:8]
  Map 映射 = {键1: 值, 键2: 值};

  Map<键类型, 值类型> 映射 = {};
  Map<键类型, 值类型> 映射 = {键1: 值, 键2: 值};

  var 映射 = <键类型, 值类型>{};
  var 映射 = <键类型, 值类型>{键1: 值, 键2: 值};
}
```

---

### 常用操作

```dart
void main() {
  Map 映射 = {键1: 值, 键2: 值};            // [!code focus:10]

  // 获取键值对个数
  console.log(映射.length);

  // 获取值
  console.log(映射["键"]);

  // 修改值
  映射["键"] = 新值;
}
```

---

### 常用内置方法

|            |                   | 说明                                                                     |
| :--------: | :---------------: | ------------------------------------------------------------------------ |
| 会改变自身 |  `putIfAbsent()`  | 向映射中添加一组键值对，若键存在则不执行操作                             |
|            |    `remove()`     | 从映射中删除一组键值对，若键存在则不执行操作                             |
| 不改变自身 |      `keys`       | 返回一个所有键的可迭代对象 ( Iterable )<br/>需通过`toList()`将其转为列表 |
|            |     `values`      | 返回一个所有值的可迭代对象 ( Iterable )<br/>需通过`toList()`将其转为列表 |
|            |  `containsKey()`  | 判断映射中是否有某个键，返回一个布尔值                                   |
|            | `containsValue()` | 判断映射中是否有某个值，返回一个布尔值                                   |

## 函数 ( Function )

[更多详见](../function.md)
