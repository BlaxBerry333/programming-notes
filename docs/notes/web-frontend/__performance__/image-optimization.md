# 图片优化

1. 选择合适的图片格式
   不同的图片格式适用于不同的场景，选择合适的格式可以有效减少图片文件的大小。

JPEG：适合摄影类的图片，压缩比高但有损失。适用于色彩丰富、细节复杂的图片，文件较小。
PNG：适合带透明度的图片，但相对较大。适合图标、简单图形和需要透明背景的场景。
WebP：现代浏览器支持的格式，提供更高的压缩率和较小的文件大小，支持有损和无损压缩，适用于大部分图片。
SVG：适用于图标和矢量图形，支持无损压缩和缩放，不会失真。对于简单的图形，使用 SVG 可以极大地减小文件大小。
AVIF：较新的一种图像格式，压缩效果非常好，质量高，文件体积小，但兼容性目前还不如 WebP。
策略：

使用现代格式（如 WebP、AVIF）来替代传统格式（如 JPEG、PNG），尽可能减少图片文件大小。
对于简单图形，考虑使用矢量格式（SVG）。2. 图片大小的合适选择
按需加载大小：根据图片显示区域的实际需求选择图片的尺寸。如果图片仅用于小尺寸显示，不需要加载原图的大尺寸版本。
响应式图片：使用 <picture> 标签和 srcset 属性为不同的设备和屏幕分辨率提供不同尺寸的图片。例如，对于手机可以加载小尺寸图片，桌面加载大尺寸图片。
html
复制代码
<picture>

  <source srcset="image-800w.jpg" media="(max-width: 600px)">
  <source srcset="image-1600w.jpg" media="(min-width: 601px)">
  <img src="image-1600w.jpg" alt="image">
</picture>
策略：

使用 srcset 为不同设备提供适配的图片，避免加载过大的图片。
在设计时，确保图片尺寸不会大于其显示区域，避免浪费带宽和加载时间。3. 图片懒加载（Lazy Loading）
图片懒加载是一种延迟加载策略，只有当图片进入视口时，才开始加载该图片。这可以显著减少初始页面加载时需要加载的图片数量，提升页面加载速度。

html
复制代码
<img src="placeholder.jpg" data-src="real-image.jpg" class="lazyload" alt="image">
现代浏览器支持 loading="lazy" 属性，这可以很方便地启用懒加载功能：

html
复制代码
<img src="image.jpg" loading="lazy" alt="image">
策略：

在图片较多的页面上，使用懒加载来延迟加载图片，减少初始加载的资源占用。4. 图像压缩
压缩图片可以显著减少图片的文件大小，但要确保不会显著影响图片的质量。

有损压缩：会丢失部分数据，适合色彩丰富、对细节要求不高的图片。例如，JPEG 格式。
无损压缩：不会丢失任何数据，适合需要保持高质量的图像，如透明背景的 PNG 图片。
你可以使用一些工具或库进行图片压缩：

在线工具：TinyPNG、ImageOptim、Squoosh 等。
构建工具集成：如使用 imagemin、webpack-image-loader、gulp-imagemin 等工具来在构建过程中自动压缩图片。
策略：

使用压缩工具减少图片的文件大小，确保在不影响可视效果的情况下减小图片体积。5. 使用图片 CDN（内容分发网络）
将图片托管在 CDN 上可以减少服务器负载，加速图片的加载。CDN 会根据用户的地理位置将图片分发到离用户最近的节点，从而提高加载速度。

策略：

将图片存储在 CDN 上，利用 CDN 提供的优化服务（如自动压缩、格式转换等）来加速图片加载。6. 图片缓存策略
合理设置缓存头：确保图片能够被浏览器缓存，减少重复请求。通常可以设置长时间的缓存过期时间（例如，1个月），并通过版本号控制图片更新。
例如，通过 HTTP 头部设置缓存策略：

arduino
复制代码
Cache-Control: public, max-age=31536000, immutable
这表示浏览器可以缓存图片 1 年，并且图片在此期间不会改变。

策略：

设置合理的缓存策略，以便重复访问时可以从缓存中加载图片，避免不必要的网络请求。7. 图片精灵（CSS Sprites）
对于很多小图标或小图形，可以考虑使用 CSS Sprites 技术，将多个小图标合并成一张大图，再通过 CSS 背景定位显示需要的部分。这样可以减少 HTTP 请求次数。

策略：

将多个小图片合并为一张精灵图，减少 HTTP 请求的数量，尤其是在图标类应用中非常有效。8. 图像预加载
通过使用 <link rel="preload"> 可以提前加载页面中的关键图片，确保图片能够尽早地展示出来。

html
复制代码

<link rel="preload" href="image.jpg" as="image">
这样浏览器会在渲染页面时优先加载这些图片，避免图片在滚动或显示时出现延迟加载的情况。

策略：

使用预加载为重要图片提前加载，以减少延迟和闪烁。9. WebP 和 AVIF 格式的自动切换
可以利用现代浏览器支持 WebP 和 AVIF 格式的优势，根据浏览器的支持情况自动选择适当的格式。例如，使用 picture 标签结合不同格式的 <source>，或者通过后端动态生成 WebP 格式的图片。

html
复制代码
<picture>

  <source srcset="image.webp" type="image/webp">
  <img src="image.jpg" alt="image">
</picture>
策略：

使用 WebP 或 AVIF 格式来替代传统的图片格式，减少图片体积，同时保持较好的图片质量。
